<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ page.title }} - {{ site.title }}</title>
    {% include head.html %}
  </head>
  <body class="d-flex flex-column min-vh-100">  <!-- removed bg-light text-dark -->
    {% include header.html %}

    <main class="flex-grow-1">
      <div class="container py-4">
        {{ content }}
      </div>
    </main>

    {% include footer.html %}

    
    <!-- Bootstrap JS (bundle includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script>
          document.addEventListener('DOMContentLoaded', function () {
            // 1) Ensure dropdowns are initialized (defensive; data-attrs usually suffice)
            document.querySelectorAll('.dropdown-toggle').forEach(function (el) {
              bootstrap.Dropdown.getOrCreateInstance(el);
            });

            // 2) Fix hamburger not closing on second tap (explicit toggle)
            const navCollapse = document.getElementById('mainNav');
            const toggler = document.querySelector('.navbar-toggler');
            if (navCollapse && toggler) {
              toggler.addEventListener('click', function () {
                const inst = bootstrap.Collapse.getOrCreateInstance(navCollapse, { toggle: false });
                navCollapse.classList.contains('show') ? inst.hide() : inst.show();
              });
            }

            // 3) Close the mobile menu after clicking any link (nice UX)
            navCollapse?.querySelectorAll('.nav-link, .dropdown-item').forEach(function (link) {
              link.addEventListener('click', function () {
                const inst = bootstrap.Collapse.getOrCreateInstance(navCollapse, { toggle: false });
                inst.hide();
              });
            });
          });
    </script>
  </body>
</html>
